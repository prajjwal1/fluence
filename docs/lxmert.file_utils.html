---

title: fluence.models.lxmert.file_utils

keywords: fastai
sidebar: home_sidebar

summary: "Implements Adaptive Attention Span"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: lxmert.file_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>I0219 22:46:20.408349 140095089055552 file_utils.py:35] PyTorch version 1.4.0+cpu available.
/glob/intel-python/python3/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:526: FutureWarning: Passing (type, 1) or &#39;1type&#39; as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / &#39;(1,)type&#39;.
  _np_qint8 = np.dtype([(&#34;qint8&#34;, np.int8, 1)])
/glob/intel-python/python3/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:527: FutureWarning: Passing (type, 1) or &#39;1type&#39; as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / &#39;(1,)type&#39;.
  _np_quint8 = np.dtype([(&#34;quint8&#34;, np.uint8, 1)])
/glob/intel-python/python3/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:528: FutureWarning: Passing (type, 1) or &#39;1type&#39; as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / &#39;(1,)type&#39;.
  _np_qint16 = np.dtype([(&#34;qint16&#34;, np.int16, 1)])
/glob/intel-python/python3/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:529: FutureWarning: Passing (type, 1) or &#39;1type&#39; as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / &#39;(1,)type&#39;.
  _np_quint16 = np.dtype([(&#34;quint16&#34;, np.uint16, 1)])
/glob/intel-python/python3/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:530: FutureWarning: Passing (type, 1) or &#39;1type&#39; as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / &#39;(1,)type&#39;.
  _np_qint32 = np.dtype([(&#34;qint32&#34;, np.int32, 1)])
/glob/intel-python/python3/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:535: FutureWarning: Passing (type, 1) or &#39;1type&#39; as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / &#39;(1,)type&#39;.
  np_resource = np.dtype([(&#34;resource&#34;, np.ubyte, 1)])
/glob/intel-python/python3/lib/python3.6/site-packages/h5py/__init__.py:34: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.
  from ._conv import register_converters as _register_converters
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="url_to_filename" class="doc_header"><code>url_to_filename</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L43" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>url_to_filename</code>(<strong><code>url</code></strong>, <strong><code>etag</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Convert <code>url</code> into a hashed filename in a repeatable way.
If <code>etag</code> is specified, append its hash to the url's, delimited
by a period.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="filename_to_url" class="doc_header"><code>filename_to_url</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L61" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>filename_to_url</code>(<strong><code>filename</code></strong>, <strong><code>cache_dir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Return the url and etag (which may be <code>None</code>) stored for <code>filename</code>.
Raise <code>EnvironmentError</code> if <code>filename</code> or its stored metadata do not exist.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cached_path" class="doc_header"><code>cached_path</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L87" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cached_path</code>(<strong><code>url_or_filename</code></strong>, <strong><code>cache_dir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Given something that might be a URL (or might be a local path),
determine which. If it's a URL, download the file and cache it, and
return the path to the cached file. If it's already a local path,
make sure the file exists and then return the path.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_s3_path" class="doc_header"><code>split_s3_path</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L117" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_s3_path</code>(<strong><code>url</code></strong>)</p>
</blockquote>
<p>Split a full s3 path into the bucket name and path.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_request" class="doc_header"><code>s3_request</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L130" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_request</code>(<strong><code>func</code></strong>)</p>
</blockquote>
<p>Wrapper function for s3 requests in order to create more helpful error
messages.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_etag" class="doc_header"><code>s3_etag</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L149" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_etag</code>(<strong><code>url</code></strong>)</p>
</blockquote>
<p>Check ETag on S3 object.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="s3_get" class="doc_header"><code>s3_get</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L158" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>s3_get</code>(<strong><code>url</code></strong>, <strong><code>temp_file</code></strong>)</p>
</blockquote>
<p>Pull a file directly from S3.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="http_get" class="doc_header"><code>http_get</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L166" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>http_get</code>(<strong><code>url</code></strong>, <strong><code>temp_file</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_from_cache" class="doc_header"><code>get_from_cache</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L178" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_from_cache</code>(<strong><code>url</code></strong>, <strong><code>cache_dir</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Given a URL, look for the corresponding dataset in the local cache.
If it's not there, download it. Then return the path to the cached file.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_set_from_file" class="doc_header"><code>read_set_from_file</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L238" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_set_from_file</code>(<strong><code>filename</code></strong>)</p>
</blockquote>
<p>Extract a de-duped collection (set) of text from a file.
Expected file format is one item per line.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_file_extension" class="doc_header"><code>get_file_extension</code><a href="https://github.com/prajjwal1/fluence/tree/master/fluence/models/lxmert/file_utils.py#L250" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_file_extension</code>(<strong><code>path</code></strong>, <strong><code>dot</code></strong>=<em><code>True</code></em>, <strong><code>lower</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}
</div>
 

